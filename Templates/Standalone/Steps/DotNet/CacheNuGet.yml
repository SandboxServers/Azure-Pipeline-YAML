parameters:
  keySuffix: ''
  cacheVersion: 'v7'
steps:
# Use lock files for cache key - provides exact package version matching
# Falls back to Directory.Packages.props if lock files don't exist yet
- task: Cache@2
  displayName: 'Cache NuGet packages'
  inputs:
    key: 'nuget | ${{ parameters.cacheVersion }} | "$(Agent.OS)" | **/packages.lock.json'
    restoreKeys: |
      nuget | ${{ parameters.cacheVersion }} | "$(Agent.OS)"
    path: $(NUGET_PACKAGES)
